[toc]

# 《图解Redis》

## 一、面试篇

### 1.1 Redis常见面试题

![提纲](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\面试篇\redis八股文提纲.png)

**1. 认识Redis**

**什么是Redis？**

**Redis和Memcached有什么区别？**

**为什么用Redis作为MySQL的缓存？**

- Redis具备高性能
- Redis具有高并发

**2. Redis数据结构**

**Redis数据结构以及使用场景分别是什么？**

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\面试篇\key.png)

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\面试篇\五种数据类型.png)

**五种常见的Redis数据类型是怎么实现？**

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\面试篇\数据类型底层实现.png)

**3. Redis线程模式**

**Redis是单线程吗？**

**Redis单线程模式是怎样的？**

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\面试篇\redis单线程模型.drawio.png)

**Redis采用单线程为什么还这么快？**

**Redis 6.0之前为什么使用单线程？**

**Redis 6.0之后为什么引入了多线程？**

**4. Redis持久化**

**Redis如何实现数据不丢失？**

- AOF日志
- RDB快照
- 混合持久化方式

**AOF日志是如何实现的？**

**RDB快照是如何实现的呢？**

**为什么会有混合持久化？**

**5. Redis集群**

**Redis如何实现服务高可用？**

- 主从复制
- 哨兵模式
- 切片集群模式

**集群脑裂导致数据丢失怎么办？**

**6. Redis过期删除与内存淘汰**

**Redis使用的过期删除策略是什么？**

**Redis持久化时，对过期键会如何处理的？**

**Redis主从模式中，对过期键会如何处理？**

**Redis内存满了，会发生什么？**

**Redis内存淘汰策略有哪些？**

**LRU算法和LFU算法有什么区别？**

**7. Redis缓存设计**

**如何避免缓存雪崩、缓存击穿、缓存穿透？**

**如何设计一个缓存策略，可以动态缓存热点数据呢？**

**说说常见的缓存更新策略？**

**8. Redis实战**

**Redis如何实现延迟队列？**

**Redis的大key如何处理？**

**Redis管道有什么用？**

**Redis事务支持回滚吗？**

**如何用Redis实现分布式锁的？**






## 二、 数据类型篇

### 2.1 Redis常见数据类型和应用场景

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\数据类型篇\redis命令提纲.png)

**1. String**

**介绍**

**内部实现**

**常用指令**

**应用场景**

- 缓存对象
- 常规计数
- 分布式锁
- 共享Session信息

**2. List**

**介绍**

**内部实现**

**常用命令**

**应用场景**

- 消息队列

**3. Hash**

**介绍**

**内部实现**

**常用命令**

**应用场景**

- 缓存对象
- 购物车

**4. Set**

**介绍**

**内部实现**

**常用命令**

**应用场景**

- 点赞
- 共同关注
- 抽奖活动

**5. Zset**

**介绍**

**内部实现**

**常用命令**

**应用场景**

- 排行榜
- 电话、姓名排序

**6. BitMap**

**介绍**

**内部实现**

**常用命令**

**应用场景**

- 签到统计
- 判断用户登陆态
- 连续签到用户总数

**7. HyperLogLog**

**介绍**

**内部实现**

**常见命令**

**应用场景**

- 百万级网页UV计数

**8. GEO**

**内部实现**

**常用命令**

**应用场景**

- 滴滴叫车

**9. Stream**

**介绍**

**常见命令**

**应用场景**

- 消息队列

**10. 总结**



### 2.2 Redis数据结构

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\数据类型篇\数据结构.png)

**1. 键值对数据库是怎么实现的？**

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\数据类型篇\数据库键值对结构.png)

**2. SDS**

**C语言字符串的缺陷**

**SDS结构设计**

**3. 链表**

**链表节点结构设计**

**链表结构设计**

**链表的优势与缺陷**

**4. 压缩列表**

**压缩列表结构设计**

**连锁更新**

**压缩列表的缺陷**

**5. 哈希表**

**哈希表结构设计**

**哈希冲突**

**链式哈希**

**rehash**

**渐进式rehash**

**rehash触发条件**

**6. 整数集合**

**整数集合结构设计**

**整数集合的升级操作**

**7. 跳表**

**跳表结构设计**

**跳表节点查询过程**

**跳表节点层数设置**

**为什么用跳表而不用平衡树？**

**8. quicklist**

**quicklist结构设计**

**9. listpack**



## 三、持久化篇

### 3.1 AOF持久化是怎么实现的？

**1. AOF日志**

**2. 三种写回策略**

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\持久化篇\三种写回策略.png)

**3. AOF重写机制**

**4. AOF后台重写**



### 3.2 RDB快照是怎么实现的？

**1. 快照怎么用？**

**2. 执行快照时，数据能被修改吗？**

**3. RDB和AOF合体**



### 3.3 Redis大Key对持久化有什么影响？

**1. 大Key对AOF日志的影响**

**2. 大Key对AOF重写和RDB的影响**

**3. 总结**





## 四、功能篇

### 4.1 Redis过期删除策略和内存淘汰策略有什么区别？

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\功能篇\提纲.jpg)

**1. 过期删除策略**

**如何设置过期时间？**

**如何判定key已过期了？**

**过期删除策略有哪些？**

**Redis过期删除策略是什么？**

**2. 内存淘汰策略**

**如何设置Redis最大运行内存？**

**Redis内存淘汰策略有哪些？**

**LRU算法和LFU算法有什么区别？**

**3. 总结**



## 五、高可用篇

### 5.1 主从复制是怎么实现的？

**1. 第一次同步**

**2. 命令传播**

**3. 分摊主服务器的压力**

**4. 增量复制**

**5. 总结**

**6. 面试题**



### 5.2 为什么要有哨兵？

![img](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\高可用篇\哨兵提纲.png)

**1. 为什么要有哨兵机制？**

**2. 哨兵机制是如何工作的？**

**3. 如何判断主节点真的故障了？**

**4. 由哪个哨兵进行主从故障转移？**

**5. 主从故障转移的过程是怎样的？**

**6. 哨兵集群是如何组成的？**

**7. 总结**





## 六、缓存篇

### 6.1 什么是缓存雪崩、击穿、穿透？

![图片](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\缓存篇\提纲.png)

**1. 缓存雪崩**

**大量数据同时过期**

**Redis故障宕机**

**2. 缓存击穿**

**3. 缓存穿透**

**4. 总结**

![图片](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\缓存篇\三种缓存异常.png)



### 6.2 数据库和缓存如何保证一致性？

**1. 数据库和缓存如何保证一致性？**

**先更新数据库，还是先更新缓存？**

- 先更新数据库，再更新缓存
- 先更新缓存，再更新数据库

**先更新数据库，还是先删除缓存？**

![图片](C:\Users\hp-pc\Desktop\实习备战记\Redis\img\缓存篇\Cache Aside策略.png)

- 先删除缓存，再更新数据库
- 先更新数据库，再删除缓存

**小结**

**前情回顾**

**如何保证两个操作都能执行成功？**

**2. 读者提问**



